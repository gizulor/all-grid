!function($){$.fn.shiftingtiles=function(i,t){t=$.extend({photosource:i,duration:5e3},t);var n,e=this;function o(t){t.css("background-image","url("+function(){void 0===i.bottom&&(i.bottom=0);var t=i.bottom+Math.floor((i.length-i.bottom)*Math.random()),n=i.splice(t,1)[0];return i.unshift(n),i.bottom++,i.bottom==i.length&&(i.bottom=0,e.trigger("st-galleryrestart")),n}()+")")}function a(i,t){return(t=$(t)).hasClass("single")||t.parent(".dual").size()>0?o(t):t.hasClass("dual")&&t.children().each((function(){o($(this))})),t}function s(){clearTimeout(n);var i=e.find(".single:not(:last-child), .dual:not(:last-child)"),o=$(i.get(~~(Math.random()*i.size())));e.trigger("st-animate-before",o),o.parent().append(a(0,o.clone())),o.addClass("disappear"),e.trigger("st-animate",o),n=setTimeout(s,t.duration)}return e.on("animationend webkitAnimationEnd oAnimationEnd",".leave > .row",(function(){$(this).parent().addClass("left").removeClass("leave")})),e.on("animationend webkitAnimationEnd oAnimationEnd",".disappear",(function(){return $(this).css("display","none").remove(),e.trigger("st-animate-after"),!1})),function(i){i.addClass("shiftingtiles"),i.prepend("<div class='row'><div class='single'></div><div class='single'></div><div class='dual'><div></div><div></div></div></div>"),i.prepend("<div class='row'><div class='single'></div><div class='single'></div><div class='dual'><div></div><div></div></div></div>"),i.append("<div class='loading'>Loading Photos...</div>"),i.find(".single, .dual > div").each(a),n=setTimeout(s,t.duration)}(this),$(document.body).keydown((function(i){if(32==i.keyCode)return s(),i.preventDefault(),!1;38==i.keyCode&&$(".shiftingtiles").toggleClass("leave")})),this}}(jQuery),Array.prototype.reduce||(Array.prototype.reduce=function(i){if(null==this)throw new TypeError("Object is null or undefined");var t,n=0,e=this.length>>0;if("function"!=typeof i)throw new TypeError("First argument is not callable");if(arguments.length<2){if(0===e)throw new TypeError("Array length is 0 and no second argument");t=this[0],n=1}else t=arguments[1];for(;n<e;)n in this&&(t=i.call(void 0,t,this[n],n,this)),++n;return t});