$(".atoms-nav ").sortable({group:".aa_dir ",handle:".aa_dir__dirNameGroup__name",onEnd:function(a){var e=a.item,o=$(e).closest(".aa_dir").data("navitem"),n=[];$(".atoms-nav ").find(".aa_dir").each(function(){n.push({name:"catName[]",value:$(this).data("navitem")})}),$.ajax({type:"POST",url:"atomic-core/temp-processing/temp-nav-cat-sort.php",data:n,dataType:"json",encode:!0}).done(function(a){console.log(a),a.success?(console.log("success"),window.location="atomic-core/?cat="+o):(console.log("not success"),a.errors.name)}).fail(function(){console.log("failed")})}}),$(".aa_fileSection").sortable({group:".aa_fileSection ",filter:".aa_addFileItem",onUpdate:function(a){var e=a.item,o=$(e).data("cat"),n=[];$(".fileSection-"+o).find(".aa_fileSection__file").each(function(){n.push({name:"compName[]",value:$(this).data("comp")})}),n.push({name:"currentCat",value:o}),console.log(n),$.ajax({type:"POST",url:"atomic-core/temp-processing/temp-nav-comp-sort.php",data:n,dataType:"json",encode:!0}).done(function(a){console.log(a),a.success&&(console.log("success"),window.location="atomic-core/?cat="+o)}).fail(function(){console.log("failed")})},onAdd:function(a){var e=a.item,o=$(e).closest(".aa_dir").data("navitem"),n=$(e).data("cat"),s=$(e).data("comp"),c=[];$(".fileSection-"+o).find(".aa_fileSection__file").each(function(){c.push({name:"compName[]",value:$(this).data("comp")})}),c.push({name:"thisCompName",value:s}),c.push({name:"newCat",value:o}),c.push({name:"oldCat",value:n}),$.ajax({type:"POST",url:"atomic-core/temp-processing/temp-nav-compCat-sort.php",data:c,dataType:"json",encode:!0}).done(function(a){console.log(a),a.success?(console.log("success"),window.location="atomic-core/?cat="+o):(a.errors.exists&&($(".aa_errorBox__message").html(""),$(".atoms-main").prepend('<div class="aa_errorBox"><p class="aa_errorBox__message"><i class="fa fa-times aa_js-errorBox__close"></i> '+a.errors.exists+"</p></div>").find(".aa_errorBox").hide().fadeIn(200).delay(1e3).queue(function(){window.location="atomic-core/?cat="+n})),a.errors.name&&($(".aa_errorBox__message").html(""),$(".aa_actionDrawer").prepend('<div class="aa_errorBox"><p class="aa_errorBox__message"><i class="fa fa-times aa_js-errorBox__close"></i> '+a.errors.name+"</p></div>").find(".aa_errorBox").hide().fadeIn(200)))}).fail(function(){console.log("failed")})}});